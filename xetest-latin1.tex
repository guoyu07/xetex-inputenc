\documentclass{article}
\usepackage{fontspec}

\makeatletter

\newcommand\inputencoding[1]{%
  \def\xetex@inputenc{#1}%
}

\inputencoding{latin1}

\def\@input#1{%
  \IfFileExists{#1}{%
    \XeTeXdefaultencoding "utf8"
    \@@input\@filef@und
    \XeTeXdefaultencoding "\xetex@inputenc"
  }{\typeout{No file #1.}}%
}

\XeTeXinputencoding "latin1"
\XeTeXdefaultencoding "latin1"

\begin{document}
\immediate\write\@auxout{\string\XeTeXinputencoding "utf8"}
\tableofcontents
\section{Main file}
\subsection{Literal: ^^e5 ^^e9 ^^ee ^^f8 ^^fc}
\subsection{Direct: å é î ø ü}
\subsection{Protected Literal: \protect ^^e5 \protect ^^e9 \protect ^^ee \protect ^^f8 \protect ^^fc}
\subsection{Protected Direct: \protect å \protect é \protect î \protect ø \protect ü}
\input xetest-latin1-subfile.tex
\end{document}